<% if user_signed_in? %>
    <div class="jumbotron jumbotron-home">
        <div class="container">
            <h1>Welcome back!</h1>
            <p>petSNAP: Purrrfect fun for you and your furry friends</p>
        </div>
    </div>
      <div class="container">
        <div class="row">
            <div class="col-md-4">
                <h2>Explore</h2>
                <p>See what other petSNAP users are talking about</p>
                <p><%= link_to "View all Tails", tweets_path, class: "btn btn-info" %></p>
            </div>
            <div class="col-md-4">
                 <h2>Share</h2>
                <p>Update us with daily pics and 'tails' about your pets with your family, friends and like minded animal lovers</p>
                <p><%= link_to "New Tail", new_tweet_path, class: "btn btn-info" %></p>
            </div>
            <div class="col-md-4">
               <h2>Home</h2>
                <p> Update your status with your pet's latest hilarious habits and see Tails from the people you follow </p>
                <p><%= link_to "Your Homepage", user_path(current_user.username), class: "btn btn-info" %></p>
            </div>
        </div>
    </div>
    
    
<% else %>
    <div class="jumbotron jumbotron-home">
        <div class="container">
            <h1>Welcome to petSNAP!</h1>
            <p>Purrrfect fun for you and your furry friends</p>
            <%= link_to "Learn more Â»", about_path, class: "btn btn-info btn-lg" %> 
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <h2>Explore</h2>
                <p>See what other petSNAP users are talking about</p>
                <p><%= link_to "View all Tails", tweets_path, class: "btn btn-secondary" %></p>
            </div>
            <div class="col-md-4">
                 <h2>Share</h2>
                <p>Update us with daily pics and 'tails' about your pets with your family, friends and like minded animal lovers</p>
                <p><%= link_to "Log In", login_path, class: "btn btn-secondary" %></p>
            </div>
            <div class="col-md-4">
               <h2>Home</h2>
                <p> Update your status with your pet's latest hilarious habits and see Tails from the people you follow </p>
                <p><%= link_to "Log In", login_path, class: "btn btn-secondary" %></p>
            </div>
        </div>
    </div>
<% end %>

<div class='container'>

    <p id="notice"><%= notice %></p>
      
      <h2>Tails &nbsp  &nbsp  &nbsp &nbsp
        <% if user_signed_in? %>
          <%= link_to "New Tail", new_tweet_path, class: "btn btn-info btn-lg" %>  
          </h1>
        <% end %>
      </h2>
      
        <tbody>
          <% @tweets.reverse_each do |tweet, posted| %>
            <div class="mt-3">
              <div class="card bg-light" style="width: 18rem;">
                <div class="card-body">
                  <!-- I can't make the line below link_to tweet.user.username, user_path(tweet.user.username) -->
                  <!-- This used to work, but I can't work out what has changed from the earlier commit -->
                  <!-- It only works locally with link_to current_user.username, user_path(current_user.username)   which is obviously wrong as it names all the tweets as the current user -->
                  <% if user_signed_in? %>
                      <h5 class="card-title"> <%= link_to tweet.user.username, user_path(tweet.user.username) %> </h5>
                  <% else %>
                      <h5 class="card-title"> <%= tweet.user.username %> </h5>
                  <% end %>
                  <p class="card-text"><%= tweet.content %></p>
                  <p><%= tweet.created_at.strftime('%H:%M, %e %b %Y')%></p>
                  
                      <p>Likes: <%= tweet.votes_for.up.size %>
                        <% if user_signed_in? %>
                          &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
                          <% if current_user.voted_up_on? tweet %>
                            <%= link_to 'Unlike', unvote_tweet_path(tweet), method: :delete %>
                          <% else %>
                            <%= link_to 'Like', vote_tweet_path(tweet), method: :post %>
                          <% end %>
                        <% end %>
                      </p>
    
                      <% if tweet.user == current_user %>
                      <a href="#" class="card-link"><%= link_to 'Delete', tweet, method: :delete, data: { confirm: 'Are you sure?' } %></a>
                      <a href="#" class="card-link">           </a>
                      <a href="#" class="card-link">           </a>
                      <a href="#" class="card-link">           </a>
                      <a href="#" class="card-link">           </a>
                      <a href="#" class="card-link">           </a>
                      <a href="#" class="card-link">           </a>
                      <a href="#" class="card-link">           </a>
                      <a href="#" class="card-link"><%= link_to 'Edit', edit_tweet_path(tweet) %></a>                  <% end %>
                      <p> </p>
                </div>
              </div>
            </div>
          <% end %>
        </tbody>
        
      <p></p>
      
      <% if user_signed_in? %>
        <%= link_to "New Tail", new_tweet_path, class: "btn btn-info btn-lg" %>  
      <% else %>
        <%= link_to "Sign up now!", signup_path, class: "btn btn-info btn-lg" %>  
        <%= link_to "Or log in", login_path %> 
      <% end %>
</div>